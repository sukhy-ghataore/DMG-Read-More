(()=>{"use strict";var e,t={560:(e,t,r)=>{const s=window.wp.blocks,o=(window.wp.i18n,window.wp.blockEditor),a=window.wp.components,n=window.wp.element,l=window.wp.apiFetch;var i=r.n(l);const p=window.wp.url,d=window.ReactJSXRuntime,c=JSON.parse('{"UU":"create-block/dmg-read-more"}');(0,s.registerBlockType)(c.UU,{attributes:{post:{type:"object",default:null}},edit:function({attributes:e,setAttributes:t}){const{post:r}=e,[s,l]=(0,n.useState)(""),[c,u]=(0,n.useState)(!1),[h,w]=(0,n.useState)([]),[f,g]=(0,n.useState)(1),[m,v]=(0,n.useState)(10),[b,x]=(0,n.useState)(1);(0,n.useEffect)((()=>{j()}),[]),(0,n.useEffect)((()=>{s.trim()||(w([]),u(!1),x(1)),u(!0);const e=setTimeout((()=>{j(s,f,m)}),1e3);return()=>clearTimeout(e)}),[s,f,m]);const j=async(e="",t=f,r=m)=>{const s={page:t,per_page:r,status:"publish",_fields:"id,title,link"};e&&isNaN(e)&&(s.search=e),e&&!isNaN(e)&&(delete s.page,delete s.per_page);try{const t=isNaN(e)?"/wp/v2/posts":`/wp/v2/posts/${e}`,r=await i()({path:(0,p.addQueryArgs)(t,s),parse:!1}),o=await r.json(),a=Array.isArray(o)?o:[o];a&&x(r.headers.get("X-WP-TotalPages")||0),w(a)}catch(e){console.log(e),w([])}finally{u(!1)}};let k=[];return h.length&&(k.push({value:0,label:"Select a post"}),h.forEach(((e,t)=>{k.push({value:e.id,label:e.title.rendered})}))),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.InspectorControls,{children:(0,d.jsxs)(a.PanelBody,{children:[(0,d.jsx)(a.TextControl,{label:"Search Posts",help:"Enter keyword or post ID",value:s,onChange:e=>{l(e),w([]),g(1)}}),(0,d.jsx)(a.TextControl,{label:"Page",help:`Total pages found: ${b}`,value:f,type:"number",min:1,max:b,onChange:e=>{let t=parseInt(e);isNaN(t)||t<1?t=1:t>b&&(t=b),g(t)}}),(0,d.jsx)(a.TextControl,{label:"Results to show",help:"Enter amount of posts to show",value:m,type:"number",min:0,max:100,onChange:e=>{let t=parseInt(e);isNaN(t)||t<1?t=1:t>100&&(t=100),v(t),g(1)}}),c&&(0,d.jsx)(a.Spinner,{}),h.length>0?(0,d.jsx)(a.SelectControl,{label:"Select Post",help:"Click a post to set anchor link",options:k,onChange:e=>{const r=h.find((t=>t.id===parseInt(e)));r||alert("Please select a post"),t({post:r})}}):(0,d.jsx)("p",{children:"No Posts Found"})]})}),(0,d.jsx)("div",{...(0,o.useBlockProps)(),children:r?(0,d.jsxs)("p",{children:["Read More: ",(0,d.jsx)("a",{href:r.link,className:"dmg-read-more",children:r.title.rendered})]}):(0,d.jsx)(a.Placeholder,{label:"Read More",instructions:"Select post to insert anchor link"})})]})},save:function({attributes:e}){const{post:t}=e;return(0,d.jsx)("div",{...o.useBlockProps.save(),children:t&&(0,d.jsxs)("p",{children:["Read More: ",(0,d.jsx)("a",{href:t.link,className:"dmg-read-more",children:t.title.rendered})]})})}})}},r={};function s(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,s),a.exports}s.m=t,e=[],s.O=(t,r,o,a)=>{if(!r){var n=1/0;for(d=0;d<e.length;d++){for(var[r,o,a]=e[d],l=!0,i=0;i<r.length;i++)(!1&a||n>=a)&&Object.keys(s.O).every((e=>s.O[e](r[i])))?r.splice(i--,1):(l=!1,a<n&&(n=a));if(l){e.splice(d--,1);var p=o();void 0!==p&&(t=p)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,o,a]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={269:0,305:0};s.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[n,l,i]=r,p=0;if(n.some((t=>0!==e[t]))){for(o in l)s.o(l,o)&&(s.m[o]=l[o]);if(i)var d=i(s)}for(t&&t(r);p<n.length;p++)a=n[p],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},r=globalThis.webpackChunkdmg_read_more=globalThis.webpackChunkdmg_read_more||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o=s.O(void 0,[305],(()=>s(560)));o=s.O(o)})();